对于一个刚上线的互联网项目来说，由于前期活跃度并不大，并发量相对较小，因此企业一般都会选择将所有数据存放在一个物理DB中进 行读写操作。但随着后续的市场推广力度不断加强，活跃度不断提升，这时如果仅靠一个DB来支撑所有读写压力，就会显得力不从心。所以一般到了这个阶段，大 部分Mysql DBA就会将数据库设置为读写分离状态(一主一从/一主多从)，Master负责写操作，而Slave负责读操作。按照二八定律，80%的操作更多是读操 作，那么剩下的20%则为写操作，经过读写分离后，大大提升了单库无法支撑的负载压力。不过光靠读写分离并不会一劳永逸，如果活跃度再次提升，相信又会再 次遇见数据库的读写瓶颈。因此到了这个阶段，就需要实现垂直分库。

所谓垂直分库，简单来说就是根据业务的不同将原本冗余在单库中的业务表拆散，分布到不同的业务库中，实现分而治之的读写访问操作。当然我们都知道， 传统RDBMS数据库中的数据表随着数据量的暴增，从维护性和高响应的角度去看，无论任何CRUD操作，对于数据库而言，都是一件极其伤脑筋的事情。即便 设置了索引，检索效率依然低下，因为随着数据量的暴增，RDBMS数据库的性能瓶颈就会逐渐显露出来。这一点，Nosql数据库倒是做得很好，当然架构不 同，所以不予比较。那么既然已经到了这个节骨眼上了，唯一的杀手锏就是在垂直分库的基础之上进行水平分区，也就是我们常说的Sharding。

简单来说，水平分区要做的事情，就是将原本冗余在单库中的业务表分散为N个子表(比如tab_0001、tab_0002、tab_0003、 tab_0004...)分别存放在不同的子库中。理论上来讲，子表之间通过某种契约关联在一起，每一张子表均按段位进行数据存储，比如tab_0000 存储1-10000的数据，而tab_0001存储10001-20000的数据。经过水平分区后，必然能够将原本由一张业务表维护的海量数据分配给N个 子表进行读写操作和维护，大大提升了数据库的读写性能，降低了性能瓶颈。基于分库分表的设计，目前在国内一些大型网站中应用的非常普遍。

当然一旦实现分库分表后，将会牵扯到5个非常关键的问题，如下所示：

- 单机ACID被打破，分布式事务一致性难以保证；
- 数据查询需要进行跨库跨表的数据路由；
- 多表之间的关联查询会有影响；
- 单库中依赖于主键序列自增时生成的唯一ID会有影响；
- 强外键(外键约束)难以支持，仅能考虑弱外键(约定)；